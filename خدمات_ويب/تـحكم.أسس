صنف تـحكم {
    @مشترك عرف عدد_المقابض: صحيح(0)؛
    عرف حالة_أزرار_الاتجاهات: ربـاعية؛
    عرف حالة_زر_الفعل: ثنائي = 0؛
    عرف المحور_س_السابق: عائم = 0؛
    عرف المحور_ص_السابق: عائم = 0؛
    عرف زر_الفعل_السابق: ثنائي = 0؛
    عرف المقبض: صحيح = 0؛

    عملية هذا.المحور_س: عائم {
        عرف محور_الأزرار: عائم = هذا.حالة_أزرار_الاتجاهات.يمين + هذا.حالة_أزرار_الاتجاهات.يسار؛
        إذا عدد_المقابض > هذا.المقبض {
            عرف محور_المقبض: عائم = هات_قيمة_محور_المقبض(هذا.المقبض، 0)؛
            إذا محور_الأزرار * محور_الأزرار > محور_المقبض * محور_المقبض أرجع محور_الأزرار
            وإلا أرجع محور_المقبض؛
        } وإلا {
            أرجع محور_الأزرار؛
        }
    }

    عملية هذا.المحور_ص: عائم {
        عرف محور_الأزرار: عائم = هذا.حالة_أزرار_الاتجاهات.أعلى + هذا.حالة_أزرار_الاتجاهات.أسفل؛
        إذا عدد_المقابض > هذا.المقبض {
            عرف محور_المقبض: عائم = هات_قيمة_محور_المقبض(هذا.المقبض، 1)؛
            إذا محور_الأزرار * محور_الأزرار > محور_المقبض * محور_المقبض أرجع محور_الأزرار
            وإلا أرجع محور_المقبض؛
        } وإلا {
            أرجع محور_الأزرار؛
        }
    }

    عملية هذا.زر_الفعل: ثنائي {
        إذا عدد_المقابض > هذا.المقبض {
            أرجع هذا.حالة_زر_الفعل أو هات_قيمة_زر_المقبض(هذا.المقبض، 0) > 0.5؛
        } وإلا {
            أرجع هذا.حالة_زر_الفعل؛
        }
    }

    عملية هذا.حدث() {
        هذا.المحور_س_السابق = هذا.المحور_س؛
        هذا.المحور_ص_السابق = هذا.المحور_ص؛
        هذا.زر_الفعل_السابق = هذا.زر_الفعل؛
    }
}

